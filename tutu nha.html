<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday, Dereck! üéÇüéà</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1020;
      --bg-dim:#070815;
      --text:#f7f7fb;
      --muted:#a9acc7;
      --accent:#ff69b4;
      --accent-2:#7dd3fc;
      --btn:#151633;
      --btn-hover:#1f2150;
      --gold:#ffd166;
      --pink:#ff6bba;
      --blue:#6bc1ff;
      --green:#7af59b;
      --shadow:0 10px 30px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0; background:radial-gradient(1200px 700px at 70% -10%, #19204a 0%, var(--bg) 40%, #090a19 100%);
      color:var(--text); font-family:Poppins, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;
    }
    /* Background stars */
    .sky{position:fixed; inset:0; z-index:-1; overflow:hidden;}
    .star{position:absolute; width:2px; height:2px; background:#fff; border-radius:50%; opacity:.7; animation: twinkle 3s infinite ease-in-out;}
    @keyframes twinkle{0%,100%{opacity:.2} 50%{opacity:1}}

    header{padding:48px 20px 16px; text-align:center}
    .intro{max-width:900px; margin:0 auto;}
    .title{font-family:"Great Vibes", cursive; font-size: clamp(40px, 7vw, 92px); line-height:1; margin:10px 0; letter-spacing:.5px;}
    .subtitle{font-weight:300; color:var(--muted); font-size:clamp(14px, 2.6vw, 18px)}

    .controls{display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin:28px auto 10px; max-width:960px}
    .btn{appearance:none; border:1px solid rgba(255,255,255,.08); background:linear-gradient(180deg, var(--btn), #0b0c22);
      color:#fff; padding:14px 18px; border-radius:16px; cursor:pointer; font-weight:600; letter-spacing:.2px; backdrop-filter: blur(6px);
      box-shadow: var(--shadow); transition: transform .08s ease, background .2s ease, border-color .2s ease;}
    .btn:hover{transform: translateY(-1px); background:var(--btn-hover); border-color:rgba(255,255,255,.14)}
    .btn:active{transform: translateY(0)}
    .btn[disabled]{opacity:.5; cursor:not-allowed}

    /* Garland lights */
    .garlands{position:fixed; inset:0; pointer-events:none;}
    .garland{position:absolute; left:0; right:0; height:120px;}
    .garland svg{width:100%; height:100%}
    .bulb{filter: drop-shadow(0 0 6px rgba(255,255,255,.6)); opacity:.25;}
    body.lights-on .bulb{opacity:1; animation:glow 1.6s ease-in-out infinite alternate}
    @keyframes glow{from{filter:drop-shadow(0 0 2px rgba(255,255,255,.35))} to{filter:drop-shadow(0 0 16px rgba(255,255,255,.9))}}

    /* Stage */
    .stage{display:grid; place-items:center; margin: 40px auto; max-width:1000px; padding: 0 18px}

    /* Balloons */
    .balloons{position:fixed; inset:0; pointer-events:none; overflow:hidden;}
    .balloon{position:absolute; bottom:-120px; width:56px; height:72px; border-radius:50% 50% 48% 52% / 60% 60% 40% 40%;
      box-shadow: inset -6px -12px 24px rgba(0,0,0,.15); animation: floatUp linear forwards;}
    .string{position:absolute; left:50%; top:70px; width:2px; height:80px; background:rgba(255,255,255,.7); transform:translateX(-50%);}
    @keyframes floatUp{to{transform:translateY(-120vh)}}

    /* Cake */
    .cake-wrap{display:none;}
    .cake{width:min(520px, 90vw); filter: drop-shadow(0 18px 35px rgba(0,0,0,.45));}
    .flame{opacity:0; transform-origin:50% 80%;}
    .flame.use{animation: flicker .12s infinite alternate ease-in-out; opacity:1}
    @keyframes flicker{from{transform:scale(1) translateY(0)} to{transform:scale(1.06) translateY(-1px)}}

    /* Confetti */
    .confetti{position:fixed; pointer-events:none; inset:0; overflow:hidden}
    .piece{position:absolute; width:10px; height:14px; background:var(--gold); opacity:0; animation: drop 2.2s ease-out forwards}
    @keyframes drop{0%{transform:translateY(-40vh) rotate(0); opacity:0} 10%{opacity:1} 100%{transform:translateY(110vh) rotate(720deg); opacity:0}}

    footer{color:var(--muted); text-align:center; padding:30px 0 60px; font-size:13px}
    .hint{opacity:.9}

    /* Dim effect when lights off */
    .dim{position:fixed; inset:0; background:radial-gradient(800px 400px at 50% -10%, transparent 0%, transparent 45%, rgba(0,0,0,.45) 70%, rgba(0,0,0,.6) 100%); pointer-events:none; opacity:1; transition:opacity .6s ease}
    body.lights-on .dim{opacity:0}

    /* Toast */
    .toast{position:fixed; left:50%; bottom:24px; transform:translateX(-50%); background:rgba(12,12,32,.9); border:1px solid rgba(255,255,255,.08);
      padding:10px 14px; border-radius:12px; font-size:14px; color:#fff; opacity:0; transition:opacity .25s ease, transform .25s ease; box-shadow: var(--shadow)}
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-4px)}
  </style>
</head>
<body>
  <div class="sky" aria-hidden="true" id="sky"></div>
  <div class="dim" aria-hidden="true"></div>
  
  <header>
    <div class="intro">
      <div class="subtitle">Today is all about you üéâ</div>
      <h1 class="title">Happy Birthday, Dereck</h1>
      <p class="subtitle">Tap the buttons below to light up the party!</p>
    </div>
    <div class="controls">
      <button id="btnLights" class="btn">üí° Turn On Lights</button>
      <button id="btnMusic" class="btn">üéµ Play Music</button>
      <button id="btnDecor" class="btn">üéä Let's Decorate</button>
      <button id="btnBalloons" class="btn">üéà Fly With Balloons</button>
      <button id="btnCake" class="btn">üç∞ Most Delicious Cake Ever</button>
      <button id="btnCandle" class="btn">üïØÔ∏è Light Candle</button>
    </div>
  </header>

  <!-- Garlands -->
  <div class="garlands" id="garlands" aria-hidden="true" style="display:none">
    <div class="garland" style="top:0">
      <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M0,40 C200,120 400,0 600,80 C800,160 1000,20 1200,60" stroke="rgba(255,255,255,.12)" fill="none" stroke-width="3"/>
        <!-- bulbs -->
        <g class="bulbs">
          <!-- Bulbs placed along the curve -->
          <circle class="bulb" cx="80" cy="60" r="9" fill="#ff6b6b"/>
          <circle class="bulb" cx="180" cy="72" r="9" fill="#ffd166"/>
          <circle class="bulb" cx="280" cy="38" r="9" fill="#7af59b"/>
          <circle class="bulb" cx="380" cy="82" r="9" fill="#6bc1ff"/>
          <circle class="bulb" cx="480" cy="46" r="9" fill="#ff6bba"/>
          <circle class="bulb" cx="580" cy="90" r="9" fill="#c8ff88"/>
          <circle class="bulb" cx="680" cy="34" r="9" fill="#ffb3ff"/>
          <circle class="bulb" cx="780" cy="86" r="9" fill="#ffee77"/>
          <circle class="bulb" cx="880" cy="42" r="9" fill="#8be9fd"/>
          <circle class="bulb" cx="980" cy="96" r="9" fill="#a1ffce"/>
          <circle class="bulb" cx="1080" cy="48" r="9" fill="#ff8c69"/>
        </g>
      </svg>
    </div>
  </div>

  <main class="stage">
    <div class="cake-wrap" id="cakeWrap">
      <!-- Simple SVG cake with 5 candles -->
      <svg class="cake" viewBox="0 0 600 420" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="cream" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#ffe8ef"/>
            <stop offset="100%" stop-color="#ffd1e3"/>
          </linearGradient>
          <linearGradient id="choco" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#7a3f1b"/>
            <stop offset="100%" stop-color="#4a240d"/>
          </linearGradient>
          <radialGradient id="flameGrad" cx="50%" cy="30%" r="60%">
            <stop offset="0%" stop-color="#fff7b1"/>
            <stop offset="60%" stop-color="#ffd166"/>
            <stop offset="100%" stop-color="#ff7a59"/>
          </radialGradient>
        </defs>
        <!-- Plate -->
        <ellipse cx="300" cy="380" rx="220" ry="26" fill="#c7d2fe" opacity=".4"/>
        <!-- Cake layers -->
        <rect x="120" y="270" width="360" height="90" rx="12" fill="url(#choco)"/>
        <rect x="150" y="210" width="300" height="70" rx="12" fill="url(#cream)"/>
        <rect x="180" y="160" width="240" height="60" rx="12" fill="url(#choco)"/>
        <!-- Drips -->
        <path d="M150,210 q20,24 0,48 q-20,24 -40,0 q0,-26 40,-48z" fill="#ffd1e3" opacity=".9"/>
        <path d="M310,210 q18,22 0,44 q-18,22 -36,0 q0,-26 36,-44z" fill="#ffd1e3" opacity=".9"/>
        <path d="M420,210 q22,24 0,48 q-22,24 -44,0 q0,-26 44,-48z" fill="#ffd1e3" opacity=".9"/>

        <!-- Candles -->
        <g id="candles">
          <g transform="translate(200,150)">
            <rect x="-8" y="-40" width="16" height="50" rx="4" fill="#7dd3fc"/>
            <circle class="flame" cx="0" cy="-48" r="10" fill="url(#flameGrad)"/>
          </g>
          <g transform="translate(260,140)">
            <rect x="-8" y="-40" width="16" height="50" rx="4" fill="#a1ffce"/>
            <circle class="flame" cx="0" cy="-48" r="10" fill="url(#flameGrad)"/>
          </g>
          <g transform="translate(300,135)">
            <rect x="-8" y="-40" width="16" height="50" rx="4" fill="#fca5a5"/>
            <circle class="flame" cx="0" cy="-48" r="10" fill="url(#flameGrad)"/>
          </g>
          <g transform="translate(340,140)">
            <rect x="-8" y="-40" width="16" height="50" rx="4" fill="#fde68a"/>
            <circle class="flame" cx="0" cy="-48" r="10" fill="url(#flameGrad)"/>
          </g>
          <g transform="translate(400,150)">
            <rect x="-8" y="-40" width="16" height="50" rx="4" fill="#c7d2fe"/>
            <circle class="flame" cx="0" cy="-48" r="10" fill="url(#flameGrad)"/>
          </g>
        </g>
        <text x="300" y="320" text-anchor="middle" font-family="Poppins" font-size="28" fill="#ffe6f5">Happy Birthday, Dereck!</text>
      </svg>
    </div>
  </main>

  <div class="balloons" id="balloons" aria-hidden="true"></div>
  <div class="confetti" id="confetti" aria-hidden="true"></div>
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <footer>
    <div class="hint">Made with üíñ for Dereck. No final message section, just vibes.</div>
  </footer>

<script>
  // --- tiny utilities ---
  const $ = (sel, el=document) => el.querySelector(sel);
  const $$ = (sel, el=document) => [...el.querySelectorAll(sel)];
  const toast = (msg) => {
    const t = $('#toast'); t.textContent = msg; t.classList.add('show');
    clearTimeout(window._toastTimer);
    window._toastTimer = setTimeout(()=> t.classList.remove('show'), 1900);
  };

  // --- Starry sky ---
  const sky = $('#sky');
  const makeStars = () => {
    const n = 120; const frag = document.createDocumentFragment();
    for(let i=0;i<n;i++){
      const s = document.createElement('div'); s.className='star';
      s.style.left = Math.random()*100+'%'; s.style.top = Math.random()*100+'%';
      s.style.animationDelay = (Math.random()*3)+'s';
      s.style.opacity = (Math.random()*0.7+0.2).toFixed(2);
      frag.appendChild(s);
    }
    sky.appendChild(frag);
  };
  makeStars();

  // --- Lights ---
  const btnLights = $('#btnLights');
  btnLights.addEventListener('click', () => {
    document.body.classList.toggle('lights-on');
    $('#garlands').style.display = document.body.classList.contains('lights-on') ? 'block' : 'none';
    toast(document.body.classList.contains('lights-on') ? 'Lights on ‚ú®' : 'Lights off üåô');
  });

  // --- Music (Web Audio API, no external files) ---
  let audioCtx, playing=false, seqInterval;
  const btnMusic = $('#btnMusic');
  btnMusic.addEventListener('click', async () => {
    if(!audioCtx){
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }
    if(!playing){
      startSong(); playing=true; btnMusic.textContent = '‚è∏Ô∏è Pause Music'; toast('Music on üé∂');
    } else {
      stopSong(); playing=false; btnMusic.textContent = 'üéµ Play Music'; toast('Music paused ‚è∏Ô∏è');
    }
  });

  function playTone(freq, time, duration=0.25){
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type='sine'; o.frequency.value=freq; o.connect(g); g.connect(audioCtx.destination);
    const now = audioCtx.currentTime + time;
    g.gain.setValueAtTime(0.0001, now);
    g.gain.exponentialRampToValueAtTime(0.3, now+0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, now+duration);
    o.start(now); o.stop(now+duration+0.02);
  }

  function startSong(){
    const scale = [261.63,293.66,329.63,392.00,440.00,523.25]; // C D E G A C
    let step=0;
    seqInterval = setInterval(()=>{
      if(!audioCtx) return;
      // arpeggio chords
      const base = step%2===0 ? 0 : 2; // alternate Cmaj/Amin feel
      for(let i=0;i<3;i++) playTone(scale[(base+i*2)%scale.length], 0.0 + i*0.04, 0.25);
      // little melody
      playTone(scale[(step*2)%scale.length], 0.12, 0.22);
      step++;
    }, 420);
  }
  function stopSong(){
    clearInterval(seqInterval);
  }

  // --- Decorations ---
  const btnDecor = $('#btnDecor');
  btnDecor.addEventListener('click', () => {
    document.body.classList.add('lights-on');
    $('#garlands').style.display = 'block';
    toast('Room decorated ‚ú®üéä');
  });

  // --- Balloons ---
  const balloons = $('#balloons');
  const btnBalloons = $('#btnBalloons');
  btnBalloons.addEventListener('click', () => {
    for(let i=0;i<18;i++) createBalloon();
    toast('Balloons away! üéà');
  });
  function createBalloon(){
    const b = document.createElement('div'); b.className='balloon';
    const colors = ['var(--pink)','var(--blue)','var(--green)','var(--gold)'];
    b.style.background = colors[Math.floor(Math.random()*colors.length)];
    b.style.left = Math.random()*100+'%';
    b.style.animationDuration = (6 + Math.random()*5)+'s';
    b.style.transform = `translateY(${Math.random()*40}vh)`;
    const st = document.createElement('div'); st.className='string'; b.appendChild(st);
    balloons.appendChild(b);
    setTimeout(()=> b.remove(), 11000);
  }

  // --- Cake ---
  const btnCake = $('#btnCake');
  btnCake.addEventListener('click', () => {
    $('#cakeWrap').style.display = 'block';
    toast('Cake is served üç∞');
  });

  // --- Candle ---
  const btnCandle = $('#btnCandle');
  let candlesOn = false;
  btnCandle.addEventListener('click', () => {
    candlesOn = !candlesOn;
    $$('.flame').forEach(f => f.classList.toggle('use', candlesOn));
    if(candlesOn){
      confettiBurst();
      toast('Make a wish ‚ú®');
      btnCandle.textContent = 'üí® Blow Candle';
    } else {
      toast('Candle blown out üïØÔ∏è');
      btnCandle.textContent = 'üïØÔ∏è Light Candle';
    }
  });

  // --- Confetti ---
  const confetti = $('#confetti');
  function confettiBurst(){
    const colors=['#ffd166','#7dd3fc','#ff6bba','#a1ffce','#c7d2fe','#fca5a5','#fde68a'];
    for(let i=0;i<120;i++){
      const p = document.createElement('div'); p.className='piece';
      p.style.left = Math.random()*100+'%';
      p.style.top = (-10 - Math.random()*50)+'vh';
      p.style.background = colors[Math.floor(Math.random()*colors.length)];
      p.style.animationDelay = (Math.random()*0.6)+'s';
      p.style.transform = `translateY(0) rotate(${Math.random()*360}deg)`;
      confetti.appendChild(p);
      setTimeout(()=> p.remove(), 2600);
    }
  }
</script>
</body>
</html>
